/*!
 * Lunr - 0.1.0
 * Copyright (C) 2011 Oliver Nightingale
 * MIT Licensed
 */var Lunr=function(e,t){var n=new Lunr.Index(e);return t.call(n,n),n};Lunr.version="0.1.0",Lunr.utils={uniq:function(e){var t=[];if(!e)return t;for(var n=0;n<e.length;n++){var r=e[n];~t.indexOf(r)||t.push(r)}return t},intersect:function(e){var t=Array.prototype.slice.call(arguments,1),n=this.uniq(e),r=n.length,i=[];for(var s=0;s<r;s++){var o=n[s],u=!0;for(var a=0;a<t.length;a++)u=u&&~t[a].indexOf(o);u&&i.push(o)}return i},copy:function(e){var t={};for(var n in e){if(!e.hasOwnProperty(n))return;t[n]=e[n]}return t},forEachKey:function(e,t,n){for(var r in e)t.call(n,r)},mapKeys:function(e,t,n){var r=[];return this.forEachKey(e,function(e){r.push(t.call(n,e))}),r},map:function(e,t,n){var r=[],i=e.length;for(var s=0;s<i;s++)r.push(t.call(n,e[s],s,e));return r},reduce:function(e,t,n){var r=e.length;for(var i=0;i<r;i++)n=t(n,e[i]);return n},forEach:function(e,t,n){var r=e.length;for(var i=0;i<r;i++)t.call(n,e[i],i,e)}},Lunr.Index=function(){var e=function(e){this.name=e,this.refName="id",this.fields={},this.trie=new Lunr.Trie};return e.prototype.add=function(e){var t=new Lunr.Document(e,this.refName,this.fields),n=t.words();for(var r=0;r<n.length;r++){var i=n[r];this.trie.set(i.id,i.doc)}},e.prototype.field=function(e,t){this.fields[e]=t||{multiplier:1}},e.prototype.ref=function(e){this.refName=e},e.prototype.search=function(e){if(!e)return[];var t=Lunr.utils.map(Lunr.Word.fromString(e),function(e){var t=this.trie.get(e.toString()).sort(function(e,t){return e.exact&&t.exact===undefined?-1:t.exact&&e.exact===undefined?1:e.score<t.score?1:e.score>t.score?-1:0});return Lunr.utils.map(t,function(e){return e.documentId})},this);return Lunr.utils.intersect.apply(Lunr.utils,t)},e.prototype.empty=function(){delete this.trie,this.trie=new Lunr.Trie},e}(),Lunr.Document=function(){var e=function(e,t,n){this.original=e,this.fields=n,this.ref=e[t]};return e.prototype.asJSON=function(){return{id:this.ref,words:Lunr.utils.map(this.words(),function(e){return e.id}),original:this.original}},e.prototype.words=function(){var e={},t=this,n={};return Lunr.utils.forEachKey(this.fields,function(e){var r=Lunr.Word.fromString(t.original[e]),i=r.length;for(var s=0;s<i;s++){var o=r[s].toString();o in n||(n[o]={score:0,ref:t.ref}),n[o].score=n[o].score+t.fields[e].multiplier}}),Lunr.utils.mapKeys(n,function(e){return{id:e,doc:{score:n[e].score,documentId:t.ref}}})},e}(),Lunr.Trie=function(){var e=function(){this.children={},this.values=[]};e.prototype.childForKey=function(t){var n=this.children[t];return n||(n=new e,this.children[t]=n),n};var t=function(){this.root=new e};return t.prototype.get=function(e){var t=this.keys(e),n=this;return Lunr.utils.reduce(t,function(t,r){return Lunr.utils.forEach(n.getNode(r).values,function(n){var i=Lunr.utils.copy(n);e===r&&(i.exact=!0),t.push(i)}),t},[])},t.prototype.getNode=function(e){var t=function(e,n){return n.length?t(e.childForKey(n.charAt(0)),n.slice(1)):e};return t(this.root,e)},t.prototype.keys=function(e){var t=[],e=e||"",n=function(e,r){e.values.length&&t.push(r),Lunr.utils.forEachKey(e.children,function(t){n(e.children[t],r+t)})};return n(this.getNode(e),e),t},t.prototype.set=function(e,t){var n=function(e,r){if(!r.length)return e.values.push(t);n(e.childForKey(r.charAt(0)),r.slice(1))};return n(this.root,e)},t}(),Lunr.Word=function(){var e=["the","of","to","and","a","in","is","it","you","that","this"],t=function(e){this.raw=e,this.out=this.raw.replace(/^\W+/,"").replace(/\W+$/,"").toLowerCase()};return t.fromString=function(e,t){var t=t||/\b/g,n=e.split(t),r=n.length,i=[];for(var s=0;s<r;s++){var o=new Lunr.Word(n[s]);o.isStopWord()||i.push(o)}return i},t.prototype.isStopWord=function(){return e.indexOf(this.raw.toLowerCase())!==-1},t.prototype.toString=function(){if(this.isStopWord())return;return this.stem(),this.out},t.prototype.stem=function(){var e={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},t={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},n="[^aeiou]",r="[aeiouy]",i=n+"[^aeiouy]*",s=r+"[aeiou]*",o="^("+i+")?"+s+i,u="^("+i+")?"+s+i+"("+s+")?$",a="^("+i+")?"+s+i+s+i,f="^("+i+")?"+r;return function(){var n,s,l,c=this.out,h=this.out;if(c.length<3)return c;var p,d,m,g;l=c.substr(0,1),l=="y"&&(h=l.toUpperCase()+h.substr(1)),p=/^(.+?)(ss|i)es$/,d=/^(.+?)([^s])s$/,p.test(h)?h=h.replace(p,"$1$2"):d.test(h)&&(h=h.replace(d,"$1$2")),p=/^(.+?)eed$/,d=/^(.+?)(ed|ing)$/;if(p.test(h)){var y=p.exec(h);p=new RegExp(o),p.test(y[1])&&(p=/.$/,h=h.replace(p,""))}else if(d.test(h)){var y=d.exec(h);n=y[1],d=new RegExp(f),d.test(n)&&(h=n,d=/(at|bl|iz)$/,m=new RegExp("([^aeiouylsz])\\1$"),g=new RegExp("^"+i+r+"[^aeiouwxy]$"),d.test(h)?h+="e":m.test(h)?(p=/.$/,h=h.replace(p,"")):g.test(h)&&(h+="e"))}p=/^(.+?)y$/;if(p.test(h)){var y=p.exec(h);n=y[1],p=new RegExp(f),p.test(n)&&(h=n+"i")}p=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/;if(p.test(h)){var y=p.exec(h);n=y[1],s=y[2],p=new RegExp(o),p.test(n)&&(h=n+e[s])}p=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/;if(p.test(h)){var y=p.exec(h);n=y[1],s=y[2],p=new RegExp(o),p.test(n)&&(h=n+t[s])}p=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,d=/^(.+?)(s|t)(ion)$/;if(p.test(h)){var y=p.exec(h);n=y[1],p=new RegExp(a),p.test(n)&&(h=n)}else if(d.test(h)){var y=d.exec(h);n=y[1]+y[2],d=new RegExp(a),d.test(n)&&(h=n)}p=/^(.+?)e$/;if(p.test(h)){var y=p.exec(h);n=y[1],p=new RegExp(a),d=new RegExp(u),m=new RegExp("^"+i+r+"[^aeiouwxy]$");if(p.test(n)||d.test(n)&&!m.test(n))h=n}p=/ll$/,d=new RegExp(a),p.test(h)&&d.test(h)&&(p=/.$/,h=h.replace(p,"")),l=="y"&&(h=l.toLowerCase()+h.substr(1)),this.out=h}}(),t}();